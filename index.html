<!DOCTYPE HTML>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <title>Order</title>
        <link href="style/stylesheet.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons|Noto+Sans+KR:300" rel="stylesheet">
        <link href="https://sf.abarba.me/font.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/gh/mailtoharshit/San-Francisco-Font-/sanfrancisco.css" rel="stylesheet">
        <script type="text/javascript" src="/script/jquery-3.4.1.min.js"></script>
        <script>
            function getParameterByName(name) {
                name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                    results = regex.exec(location.search);
                return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
            }

            function notification() {
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "https://fcm.googleapis.com/fcm/send", true);
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.setRequestHeader('Authorization', 'key=AAAAZalRFdA:APA91bGj9GJVQwhD8U-Fv-5x0PoRkVJsK-8CUWuJpmY-wLmuzs3gcizLtYR8femHv9_NGc8Yo4WFoE9fHilsacXRGvI-jTocYcnfoDc8anqFQUhmGMxvhCbrNyyhVKhC9C9nlUE5q3fv');
                xhr.send(JSON.stringify({
                    data: {
                        body: getParameterByName('tableNo') + "번 테이블이 호출 중입니다.",
                        title: "주문의 민족"
                    },
                    to: "/topics/all"
                }));
                alert("호출되었습니다.")
            }
        </script>
    </head>

    <body>
        <header class="navbar">
            <div>
                <span id="title">ORDER</span>
                <button class="notify" onclick="notification()" style="text-align: right;">
                    <i class="material-icons">
                        notifications  
                    </i>
                </button>
            </div>
        </header>

        <main id="main"> </main>
        
        <button onclick="order()" class="order">
            <div>
                <span id="price" style="text-align: left;">￦0</span>
                <span style="text-align: right;">ORDER</span>
            </div>
        </button>

        <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-storage.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-firestore.js"></script>
        <script type="text/javascript" src="/script/notify.min.js"></script>
        <script type="text/javascript" src="/script/script.js"></script>
    </body>
</html>
